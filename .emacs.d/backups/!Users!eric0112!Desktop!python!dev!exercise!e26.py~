# Python exercise 26
# Building tic-tac-toe game
# ------------------------------------------------------------------------------
import numpy as np

# Game mechanics
# ------------------------------------------------------------------------------
def translate(num):
    if num == 1:
        return 0
    elif num == 2:
        return 1
    elif num == 3:
        return 2

def pick_position(play_num, board):
    if play_num == 1 or play_num == 2:
        row = int(input("Player " + str(play_num) + ", enter your row number. "+
                        "Remember that the board is a 3x3 grid. "))
        col = int(input("Now enter your col number. "+
                        "Remember that the board is a 3x3 grid. "))
        if(translate(row) not in [0,1,2] or
           translate(col) not in [0,1,2] or
           board[translate(row)][translate(col)] != ' '):
            print("Invalid input! Try again")
            return pick_position(play_num, board)
        else:
            return [translate(row), translate(col)]

def mark(row, col, char, board):
    board[row][col] = char

def transpose(board):
    return map(list, zip(*board))

def decider(board):
    if ' ' not in [y for x in board for y in x]:
        print([y for x in board for y in x])
        print("Tied game!")
        return True
    elif(['x','x','x'] in board or
         ['x','x','x'] in transpose(board)):
        print("Player 1 wins!")
        return True
    elif(['o','o','o'] in board or
         ['o','o','o'] in transpose(board)):
        print("Player 2 wins!")
        return True

def draw_3x3_grid(board):
    board_elems = [y for x in board for y in x]
    print(" ---" * 3)
    for i in range(len(board_elems)):
        print "| " + str(board_elems[i]),
        if i in [2, 5, 8]:
            print "|\n",
            print " ---" * (3)

def player_turn(player_num, board):
    if player_num == 1:
        symbol = 'x'
    else:
        symbol = 'o'
    player = pick_position(player_num, board)
    mark(player[0], player[1], symbol, board)
    draw_3x3_grid(board)
    return decider(board)

def game(count, board):
    if count == 0:
        print("Welcome to Tic-Tac-Toe.\n" +
              "Please insert commands via row number then column number.\n" +
              "Player 1 = x and Player 2 = o")
    if player_turn(1, board) or player_turn(2, board):
        return
    else:
        count += 1
        return game(count, board)

# Function calls 
# ------------------------------------------------------------------------------
board = [[' ',' ',' '], [' ',' ',' '], [' ',' ',' ']]

game(0, board)
